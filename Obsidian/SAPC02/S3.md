- ## An object storage service - serverless
- ## An individual object can be upto 50TB (_Dec25_)


---
# CLI for S3
- S3 - high level
- S3api - low level commands
## 1. Deleting non-versioned bucket
- The flag --force is used to empty the bucket before deleting (--force flag deletes all the objects in the bucket ) 
```bash
aws s3 rb s3://<bucket_name> --force
```

## 2.  Listing out the buckets

### 1. Using the S3
```bash
aws s3 ls
```
### 2. Using S3 api to list the output of bucket names in a table form
-  --query flag is used to give an [JMES query](https://jmespath.org)
-  Key Buckets -> List[ ]  Name
```bash
aws s3api list-buckets --query Buckets[].Name \
--output table
```

## 3. Using S3 api to list the output of the object's name in the bucket  in a table form
- Bucket name is enough (s3:// prefix not needed)
- First use --output json to get an idea of how to write the query.
- JMES query to get only the key(name) of the objects within the bucket.
```bash
aws s3api list-objects --bucket sapco2-eg-bkt \
 --output table \
 --query Contents[].Key
```

## 4. Downloading the objects using S3api
-  Bucket name not the link
-  --key    Object name    < Desired downloaded file name >
```bash
aws s3api get-object --bucket sapco2-egbkt \
--key LearnJava.pdf javabook.pdf
```


## 5. Upload an object to Amazon S3
- The following `put-object` command example uploads an object to Amazon S3. 
  ```bash
  aws s3api put-object \
    --bucket amzn-s3-demo-bucket \
    --key my-dir/MySampleImage.png \
    --body MySampleImage.png
  ```


## 6. Listing the buckets (Newly created First  -> Last sequence)
- JQ -SED for JSON  is used to filter and give a neat output [JQ](https://jqlang.org)
- The output JSON of S3api  list-buckets is passed via "|" to query 
```bash
 aws s3api list-buckets | jq '.Buckets | sort_by(.CreationDate) | reverse | .[] | .Name
```